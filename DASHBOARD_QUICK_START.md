# Dashboard 快速使用指南

## 🚀 启动Dashboard

### 1. 启动命令

```bash
# 方法1: 直接运行
python dashboard_app.py

# 方法2: 如果使用交易机器人，它会自动启动
python production_trading_bot.py
```

### 2. 访问地址

```
http://localhost:5000
```

在浏览器中打开上述地址即可看到Dashboard。

---

## 📊 界面导航

### 顶部：性能指标概览

```
┌────────────┬────────────┬────────────┬────────────┐
│ 📈 总收益率│ 🎯 胜率    │ 💰 盈亏比  │ ⚠️ 最大回撤│
│ +15.32%    │ 65.5%      │ 2.35       │ -8.42%     │
│ ↑ 盈利中   │ 15/23 胜   │ 优秀       │ 风险低     │
└────────────┴────────────┴────────────┴────────────┘
```

**说明**：
- 悬停查看更多信息
- 绿色=好，红色=需改进
- 实时更新

### 中部：图表分析区

#### 标签页切换
```
[资产净值] [盈亏分析] [回撤分析]  [时间范围: 24小时 ▼]
```

**操作**：
1. 点击标签页切换图表
2. 点击时间范围选择查看周期
3. 鼠标悬停查看具体数值
4. 滚轮缩放，拖动平移

### 底部：详细信息卡片

```
┌──────────────┬──────────────┬──────────────┐
│ 当前持仓     │ 账户信息     │ 最近交易记录 │
│ [展开/折叠]  │ [展开/折叠]  │ [展开/折叠]  │
└──────────────┴──────────────┴──────────────┘
```

**操作**：点击卡片头部展开/折叠内容

---

## 🎯 核心功能使用

### 1. 查看资产净值

**步骤**：
1. 确保"资产净值"标签页是激活状态（蓝色）
2. 图表显示：
   - **蓝色曲线**：账户净值
   - **绿色/红色曲线**：累计盈亏
3. 悬停鼠标查看精确数值

**技巧**：
- 双击图表区域：重置缩放
- 按住拖动：平移查看
- 滚轮：放大缩小

---

### 2. 分析盈亏分布

**步骤**：
1. 点击"盈亏分析"标签页
2. 查看柱状图：
   - **绿色柱**：该时段盈利
   - **红色柱**：该时段亏损
3. 识别盈亏模式

**用途**：
- 找出盈利时段
- 识别亏损原因
- 优化交易时机

---

### 3. 评估回撤风险

**步骤**：
1. 点击"回撤分析"标签页
2. 查看红色填充区域
3. 关注最低点（最大回撤）

**判断标准**：
- **-5%以内**：风险低 ✅
- **-5% ~ -15%**：风险中 ⚠️
- **-15%以上**：风险高 ⚠️

**应对策略**：
- 回撤过大：减小仓位
- 回撤持续：暂停交易
- 回撤恢复：评估策略

---

### 4. 调整时间范围

**步骤**：
1. 点击右上角时间范围下拉框
2. 选择需要的时间段：
   ```
   • 6小时  - 短期交易分析
   • 24小时 - 日内表现（默认）
   • 7天    - 周度趋势
   • 30天   - 月度表现
   ```
3. 图表自动更新

**建议**：
- **日内交易者**：使用6H或24H
- **波段交易者**：使用7天
- **长期投资**：使用30天

---

### 5. 查看交易详情

**步骤**：
1. 滚动到"最近交易记录"卡片
2. 点击卡片头部展开
3. 点击任意交易记录行
4. 查看详细信息和AI分析

**信息包括**：
- 交易类型（BUY/SELL）
- 交易价格和数量
- 盈亏金额
- AI决策理由
- 止损止盈设置

---

## 🔄 实时更新

Dashboard支持两种更新模式：

### WebSocket模式（推荐）
- ✅ 实时推送更新
- ✅ 低延迟
- ✅ 自动重连
- 状态显示：`online`

### 轮询模式（备用）
- 每5分钟刷新一次
- 适用于WebSocket不可用时
- 状态显示：`offline`

**手动刷新**：点击右上角"刷新数据"按钮

---

## 🎨 个性化设置

### 修改默认时间范围

编辑 `templates/dashboard.html`：

```javascript
// 找到这一行（约1386行）
let currentTimeframe = 24;  // 改为你想要的小时数

// 例如：默认显示7天
let currentTimeframe = 168;  // 7天 = 7 × 24小时
```

### 修改图表颜色

找到图表渲染函数，修改 `color` 属性：

```javascript
// 净值曲线颜色
line: {
    color: '#3b82f6',  // 改为你喜欢的颜色（十六进制）
    width: 3
}

// 例如：改为紫色
line: {
    color: '#8b5cf6',
    width: 3
}
```

### 修改图表高度

```javascript
// 在 layout 中找到
height: 450  // 改为你想要的像素高度

// 例如：更高的图表
height: 600
```

---

## 📱 移动端使用

### 手机访问

1. 确保手机和电脑在同一网络
2. 获取电脑IP地址：
   ```bash
   # Windows
   ipconfig
   
   # Mac/Linux
   ifconfig
   ```
3. 手机浏览器访问：`http://[电脑IP]:5000`

### 移动端优化
- ✅ 单列布局
- ✅ 触摸手势支持
- ✅ 自适应字体大小
- ✅ 横向滚动图表

---

## 🔧 常见问题

### Q: Dashboard显示"暂无数据"？

**A**: 可能的原因：
1. 交易机器人还未运行
2. 数据库为空
3. 时间范围内无数据

**解决方案**：
```bash
# 运行交易机器人生成数据
python production_trading_bot.py

# 或等待交易执行
```

---

### Q: 图表加载缓慢？

**A**: 优化建议：
1. 缩短时间范围（如从30天改为7天）
2. 清理旧数据
3. 检查网络连接

---

### Q: WebSocket连接失败？

**A**: 检查：
1. 防火墙是否拦截5000端口
2. eventlet是否正确安装
   ```bash
   pip install eventlet
   ```
3. 查看控制台错误信息

---

### Q: 性能指标显示"--"？

**A**: 原因：
1. 交易数据不足（需要至少1笔交易）
2. 净值历史为空

**等待**：执行几笔交易后会自动显示

---

### Q: 如何导出图表？

**A**: 操作：
1. 悬停图表区域
2. 右上角出现工具栏
3. 点击"📷"相机图标
4. 选择保存位置

**格式**：PNG图片（1200×600，高清）

---

## 📊 数据说明

### 性能指标计算

#### 总收益率
```
收益率 = (当前净值 - 初始净值) / 初始净值 × 100%
```
**示例**：
- 初始净值：$10,000
- 当前净值：$11,500
- 收益率：(11500 - 10000) / 10000 × 100% = **15%**

#### 胜率
```
胜率 = 盈利交易数 / 总交易数 × 100%
```
**示例**：
- 总交易：20笔
- 盈利：13笔
- 胜率：13 / 20 × 100% = **65%**

#### 盈亏比
```
盈亏比 = 总盈利金额 / 总亏损金额
```
**示例**：
- 总盈利：$2,000
- 总亏损：$800
- 盈亏比：2000 / 800 = **2.5**

**评级**：
- > 2.0：优秀 🌟🌟🌟
- 1.5-2.0：良好 🌟🌟
- 1.0-1.5：一般 🌟
- < 1.0：需改进 ⚠️

#### 最大回撤
```
回撤 = (当前净值 - 历史峰值) / 历史峰值 × 100%
最大回撤 = min(所有回撤)
```
**示例**：
- 历史峰值：$12,000
- 最低点：$11,000
- 最大回撤：(11000 - 12000) / 12000 × 100% = **-8.33%**

---

## 🎓 使用技巧

### 技巧1：结合指标和图表
```
看到回撤-15% ⚠️
   ↓
切换到"回撤分析"图表
   ↓
识别回撤时间段
   ↓
切换到"盈亏分析"
   ↓
查看该时段亏损原因
   ↓
调整策略参数
```

### 技巧2：多时间周期分析
```
1. 先看30天（长期趋势）
   - 整体向上 ✅ 继续
   - 整体向下 ❌ 停止

2. 再看7天（近期状态）
   - 确认趋势延续

3. 最后看24H（当前表现）
   - 实时调整仓位
```

### 技巧3：风险控制
```
每日检查清单：
✓ 总收益率：是否达标？
✓ 当日回撤：是否超过5%？
✓ 胜率：是否低于50%？
✓ 盈亏比：是否小于1？

如有异常 → 立即调整或暂停
```

---

## 🚀 高级用法

### 配合交易日志
```bash
# 实时查看交易日志
tail -f production_trading_bot.log

# 对照Dashboard图表
# 分析AI决策是否合理
```

### 截图分享
```
1. 导出图表PNG
2. 配合性能指标截图
3. 制作交易报告
4. 分享到社区或团队
```

### API集成
```python
# 通过API获取数据
import requests

# 获取图表数据
response = requests.get('http://localhost:5000/api/equity_chart?hours=168')
data = response.json()

# 自定义分析
# ...
```

---

## 📞 获取帮助

### 文档
- **完整改进说明**：`DASHBOARD_CHART_IMPROVEMENTS.md`
- **优化对比**：`DASHBOARD_BEFORE_AFTER.md`
- **本指南**：`DASHBOARD_QUICK_START.md`

### 调试
```bash
# 查看Dashboard日志
python dashboard_app.py

# 查看浏览器控制台（F12）
# 检查JavaScript错误
```

### 社区
- GitHub Issues
- 项目讨论区

---

## ✅ 最佳实践

1. **每日检查**：早上查看性能指标
2. **定期回顾**：周末查看7天和30天图表
3. **及时调整**：发现回撤及时减仓
4. **记录笔记**：重要决策点做标注
5. **导出留存**：关键图表保存备份

---

**祝交易顺利！** 📈💰

有问题随时查看文档或联系支持。

